<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Nablem</title>

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        crossorigin="anonymous">

  <script src="https://kit.fontawesome.com/d56aedba85.js"
          crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/css/nablem.css">
</head>

<body data-bs-theme="dark">
  <nb-header></nb-header>

  <main class="container my-4">
    <div class="text-center">
      <h2 id="search-title"></h2>
    </div>

    <div id="search-results" class="visually-hidden">
      <div class="mt-3">
        <section class="my-5">
          <ul class="categories-grid p-0">
            <li class="category-show">
              <img src="/imgs/shows/deadplanet.jpg" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/isoplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/skibidyplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/isoplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/skibidyplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/deadplanet.jpg" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/isoplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/skibidyplanet.png" />
            </li>
          </ul>
        </section>

        <p class="text-center fw-bold">You may also like...</p>

        <section class="mb-4">
          <ul class="categories-grid p-0">
            <li class="category-show">
              <img src="/imgs/shows/skibidyplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/isoplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/skibidyplanet.png" />
            </li>
            <li class="category-show">
              <img src="/imgs/shows/deadplanet.jpg" />
            </li>
          </ul>
        </section>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jdenticon@3.3.0/dist/jdenticon.min.js"
          integrity="sha384-LfouGM03m83ArVtne1JPk926e3SGD0Tz8XHtW2OKGsgeBU/UfR0Fa8eX+UlwSSAZ"
          crossorigin="anonymous" async></script>

  <script src="/js/nablem.min.js"></script>

  <!-- Search Script -->
  <script>
    window.addEventListener("DOMContentLoaded", async () => {
      const searchTitle = document.getElementById("search-title");

      const messages = ["Searching", "Looking up", "Hold tight", "Wait a sec", "Hold your horses", "Travelling", "Running"];
      const message = messages[Math.floor(Math.random() * messages.length)];
      searchTitle.innerHTML = `<i class="fa-solid fa-circle-notch loading me-3" style="vertical-align: baseline;" class="me-2"></i>${message}...`;

      const url = new URL(location.href);
      const back = url.searchParams.get("from") || "/";
      const query = url.searchParams.get("q");
      if (!query) {
        location.href = back;
        return;
      }

      document.getElementById("search-box").value = query;
      await new Promise(r => setTimeout(r, 2000));
      searchTitle.textContent = `Search results for "${query}"`;
      document.querySelector("main").classList.add("anim-fade-down");
      document.getElementById("search-results").classList.remove("visually-hidden");

      const title = document.querySelector("title");
      title.textContent += " - Searching for " + query;

      // Adding to session storage
      sessionStorage.setItem("lq", query);
    });
  </script>
</body>

</html>